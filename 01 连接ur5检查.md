# UR5 æœºæ¢°è‡‚è¿æ¥ä¸æµ‹è¯•æŒ‡å—

---

## æ­¥éª¤ 1ï¼šç½‘ç»œè¿æ¥éªŒè¯

é¦–å…ˆç¡®ä¿å·¥æ§æœºå’Œæœºæ¢°è‡‚èƒ½ç›¸äº’é€šä¿¡ã€‚

**æ£€æŸ¥æ­¥éª¤ï¼š**
1. ç¡®ä¿å·¥æ§æœºå’Œ UR5 æœºæ¢°è‡‚åœ¨åŒä¸€å±€åŸŸç½‘
2. ä½¿ç”¨ `ping` å‘½ä»¤æµ‹è¯•ç½‘ç»œè¿é€šæ€§
   ```bash
   ping 192.168.1.211
   ```
   ï¼ˆ`192.168.1.211` æ˜¯æœ¬ç³»ç»Ÿä¸­ UR5 çš„ IP åœ°å€ï¼‰

> âš ï¸ **å‰ææ¡ä»¶**ï¼šç½‘ç»œä¸é€šä¼šå¯¼è‡´é©±åŠ¨å¯åŠ¨å¤±è´¥ã€‚å¦‚æœ ping ä¸é€šï¼Œè¯·æ£€æŸ¥ç½‘ç»œé…ç½®ã€‚

---

## æ­¥éª¤ 2ï¼šå¯åŠ¨ ROS2 é©±åŠ¨

å¯åŠ¨ UR5 æœºæ¢°è‡‚çš„ ROS2 é©±åŠ¨ç¨‹åºã€‚

**åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š**
```bash
ros2 launch ur_robot_driver ur_control.launch.py \
  ur_type:=ur5 \
  robot_ip:=192.168.1.211 \
  launch_rviz:=false \
  reverse_ip:=192.168.1.10
```

**å‚æ•°è¯´æ˜ï¼š**
- `ur_type:=ur5`: æœºæ¢°è‡‚å‹å·
- `robot_ip:=192.168.1.211`: UR5 çš„ IP åœ°å€
- `reverse_ip:=192.168.1.10`: æœ¬å·¥æ§æœºçš„ IP åœ°å€
- `launch_rviz:=false`: ä¸å¯åŠ¨å¯è§†åŒ–ç•Œé¢ï¼ˆå‡å°‘èµ„æºå ç”¨ï¼‰

> ğŸ’¡ **æç¤º**ï¼šä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£è¿è¡Œï¼Œä¸è¦å…³é—­ã€‚

**ç¤ºæ•™å™¨ç«¯é…ç½®ï¼š**

1. UR5 ç¤ºæ•™å™¨éœ€è¦åŠ è½½ä¸€ä¸ªåŒ…å« `External Control` ç»“æ„çš„è„šæœ¬
2. åœ¨ç¤ºæ•™å™¨çš„å®‰è£…è®¾ç½®ä¸­ï¼Œé…ç½® `External Control` IP åœ°å€ä¸ºæœ¬å·¥æ§æœºï¼ˆ`192.168.1.10`ï¼‰
3. ç›‘å¬ç«¯å£é€šå¸¸ä¸º `50002`ï¼Œå¯ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š
   ```bash
   ss -lntp | grep 5000
   ```

---

## æ­¥éª¤ 3ï¼šéªŒè¯ä¸ç¤ºæ•™å™¨çš„è¿æ¥

æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œæµ‹è¯•ä¸ç¤ºæ•™å™¨çš„é€šä¿¡ã€‚

**è¿è¡ŒéªŒè¯å‘½ä»¤ï¼š**
```bash
ros2 service call /dashboard_client/program_running ur_dashboard_msgs/srv/IsProgramRunning "{}"
```

**é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š**
```
response:
ur_dashboard_msgs.srv.IsProgramRunning_Response(
  answer='Program running: true',
  program_running=True,
  success=True
)
```

> âœ… **æˆåŠŸæ ‡å¿—**ï¼šå¦‚æœæ”¶åˆ°ä¸Šè¿°å“åº”ä¸” `success=True`ï¼Œè¯´æ˜è¿æ¥æ­£å¸¸ã€‚

---

## æ­¥éª¤ 4ï¼šè¿è¡Œå°å‹è½¨è¿¹æµ‹è¯•

æ‰§è¡Œä¸€ä¸ªç®€å•çš„è¿åŠ¨è„šæœ¬ï¼ŒéªŒè¯æœºæ¢°è‡‚æ§åˆ¶æ˜¯å¦æ­£å¸¸ã€‚

**è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š**
```bash
python3 tools/ur_send_small_trajectory.py --robot --delta 0.02 --duration 3.0
```

**å‚æ•°è¯´æ˜ï¼š**
- `--robot`: å®é™…æ§åˆ¶æœºæ¢°è‡‚ï¼ˆä¸æ˜¯æ¨¡æ‹Ÿï¼‰
- `--delta 0.02`: æ¯æ­¥å¢é‡
- `--duration 3.0`: è¿åŠ¨æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰

**é¢„æœŸç°è±¡ï¼š**  
æœºæ¢°è‡‚ä¼šæ‰§è¡Œä¸€ä¸ªå°å¹…è¿åŠ¨ï¼ŒéªŒè¯æ§åˆ¶é“¾è·¯ç•…é€šã€‚

---

## æ­¥éª¤ 5ï¼šä½¿ç”¨ MoveIt è¿›è¡Œç¤ºæ•™å’Œè§„åˆ’

ä½¿ç”¨ MoveIt è¿›è¡Œå¯è§†åŒ–æ§åˆ¶å’Œè½¨è¿¹è§„åˆ’ã€‚

**å¯åŠ¨ MoveIt + RVizï¼š**
```bash
ros2 launch ur_moveit_config ur_moveit.launch.py \
  ur_type:=ur5 \
  robot_ip:=192.168.1.211 \
  reverse_ip:=192.168.1.10
```

**åŠŸèƒ½ï¼š**
- åœ¨ RViz ä¸­å¯è§†åŒ–æœºæ¢°è‡‚
- æ‹–åŠ¨æœºå™¨äººå„å…³èŠ‚è¿›è¡Œç¤ºæ•™
- è§„åˆ’å’Œæ‰§è¡Œè½¨è¿¹
- å®æ—¶ç›‘æ§æœºæ¢°è‡‚çŠ¶æ€

---

## å¿«é€Ÿå‚è€ƒ

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| å¯åŠ¨é©±åŠ¨ | `ros2 launch ur_robot_driver ur_control.launch.py ur_type:=ur5 robot_ip:=192.168.1.211 launch_rviz:=false reverse_ip:=192.168.1.10` |
| æ£€æŸ¥ç¨‹åºè¿è¡ŒçŠ¶æ€ | `ros2 service call /dashboard_client/program_running ur_dashboard_msgs/srv/IsProgramRunning "{}"` |
| è¿è¡Œè½¨è¿¹æµ‹è¯• | `python3 tools/ur_send_small_trajectory.py --robot --delta 0.02 --duration 3.0` |
| å¯åŠ¨ MoveIt è§„åˆ’ | `ros2 launch ur_moveit_config ur_moveit.launch.py ur_type:=ur5 robot_ip:=192.168.1.211 reverse_ip:=192.168.1.10` |
| æŸ¥çœ‹ç›‘å¬ç«¯å£ | `ss -lntp \| grep 5000` |

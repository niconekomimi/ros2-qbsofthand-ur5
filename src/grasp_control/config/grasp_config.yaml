# grasp_control/config/grasp_config.yaml
# ========== 抓取控制配置文件 ==========
# 修改此文件可调整抓取行为，无需重新编译

# ---------- 相机参数 ----------
camera:
  info_topic: "/oak/rgb/camera_info"
  # 相机内参（备用，优先从话题获取）
  fx: 1033.525
  fy: 1032.762
  cx: 627.880
  cy: 330.726

# ---------- TF 坐标系 ----------
frames:
  robot_base: "base"       # 确认使用 base 坐标系（与 UR 示教器一致）
  robot_effector: "tool0"
  camera: "oak_rgb_camera_optical_frame"

# ---------- YOLO 检测 ----------
detection:
  centers_topic: "/centers"
  target_class: "orange"  # 目标物体类别

# ---------- 机械臂控制 ----------
arm:
  action: "/scaled_joint_trajectory_controller/follow_joint_trajectory"
  joints:
    - "shoulder_pan_joint"
    - "shoulder_lift_joint"
    - "elbow_joint"
    - "wrist_1_joint"
    - "wrist_2_joint"
    - "wrist_3_joint"
  trajectory_time: 10.0      # 默认轨迹时间
  approach_time: 10.0       # 接近物体时间

# ---------- 灵巧手控制 ----------
hand:
  service: "/qbsofthand_control_node/set_closure"
  open_closure: 0.0         # 张开
  close_closure: 0.8        # 闭合
  duration: 1.5             # 时间

# ---------- 关键位置（关节角度，弧度） ----------
positions:
  # Home 位置（拍照点）- 当前位置
  home_joints:
    - 1.788    # shoulder_pan_joint
    - -2.172   # shoulder_lift_joint
    - 1.435    # elbow_joint
    - -1.528   # wrist_1_joint
    - -1.721   # wrist_2_joint
    - 1.773    # wrist_3_joint

  # 终点位置（递给人类，手心朝上）- 往前延伸
  handover_joints:
    - 1.696    # shoulder_pan_joint
    - -1.219   # shoulder_lift_joint
    - 1.362    # elbow_joint
    - -3.303   # wrist_1_joint
    - -1.763   # wrist_2_joint
    - -1.552   # wrist_3_joint


# ---------- 抓取参数 ----------
grasp:
  lift_height: 0.30         # 抬起高度（米）

  # 末端执行器相对于物体中心的偏移（米）
  tcp_offset:
    x: -0.03
    y: 0.12
    z: 0.06

  # 抓取姿态：支持 RPY 或 rx,ry,rz
  orientation:
    roll: -1.152
    pitch: 1.285
    yaw: -2.661

# ---------- 安全限制 ----------
safety:
  min_z: 0.05               # 最低高度限制
  max_reach: 0.85           # 最大伸展距离
  detection_timeout: 10.0   # 检测超时
  motion_timeout: 30.0      # 运动超时

# ---------- MoveIt2 配置 ----------
moveit:
  planning_group: "ur_manipulator"
  end_effector_frame: "tool0"
  planning_time: 20.0
  velocity_scaling: 0.1
  acceleration_scaling: 0.1